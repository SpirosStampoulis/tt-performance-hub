import{Y as ul,r as p,o as ol,c as F,b as V,w as a,V as il,d as s,e,f as _,g as c,h as r,i as o,Z as sl,l as v,_ as J,F as x,m as D,x as L,t as n,n as g,B as z,I as S,z as I,$ as A,p as C,E as y,s as K,H as E,A as R,C as dl,j as O,k as Q,a0 as nl,G as rl,v as w}from"./index-BS-_TD4h.js";import{g as vl}from"./storage-_S1A6rPq.js";import{_ as fl}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ml={key:0,class:"mb-2",style:{"max-height":"100px",overflow:"hidden"}},pl={key:1,class:"text-caption"},kl={key:2,class:"text-caption"},Vl={key:0,class:"mb-4"},yl={style:{"white-space":"pre-wrap"}},cl={key:1,class:"mb-4"},gl={class:"video-container"},Sl=["src"],Cl={key:2},wl={__name:"SkillsView",setup(Ul){const f=ul(),T=p("all"),$=p(!1),U=p(!1),b=p(!1),k=p(null),d=p(null),B=p(null),Y=p(null),q={0:"Beginner",1:"Intermediate",2:"Advanced",3:"Expert",4:"Professional"},i=p({name:"",category:"",difficulty:1,notes:"",videoUrls:[],relatedSkills:[]});ol(async()=>{await f.fetchSkills()});const W=F(()=>T.value==="all"?f.skills:f.skills.filter(u=>u.category===T.value)),X=F(()=>f.skills.filter(u=>u.id!==k.value?.id)),P=F(()=>d.value?.relatedSkills?f.skills.filter(u=>d.value.relatedSkills.includes(u.id)):[]),N=(u=null)=>{u?(k.value=u,i.value={...u,videoUrls:u.videoUrls?[...u.videoUrls]:[],relatedSkills:u.relatedSkills?[...u.relatedSkills]:[]}):(k.value=null,i.value={name:"",category:"",difficulty:1,notes:"",videoUrls:[],relatedSkills:[]}),U.value=!1,$.value=!0},j=()=>{$.value=!1,k.value=null},h=()=>{i.value.videoUrls.push("")},ll=u=>{i.value.videoUrls.splice(u,1)},el=async()=>{const{valid:u}=await Y.value.validate();if(!u)return;const l={...i.value,difficulty:M(i.value.difficulty),videoUrls:i.value.videoUrls.filter(t=>t.trim()!=="")};try{k.value?await f.updateSkill(k.value.id,l):await f.addSkill(l),j()}catch(t){console.error("Error saving skill:",t)}},G=u=>{d.value=u,U.value=!0},tl=u=>{B.value=u,b.value=!0},al=async()=>{try{await f.deleteSkill(B.value.id),b.value=!1,B.value=null}catch(u){console.error("Error deleting skill:",u)}},H=u=>({Beginner:"success",Intermediate:"info",Advanced:"warning",Expert:"error",Professional:"purple"})[u]||"grey",M=u=>typeof u=="number"?q[u]:u;return(u,l)=>(s(),V(il,null,{default:a(()=>[e(_,{class:"mb-4"},{default:a(()=>[e(c,null,{default:a(()=>[e(r,{color:"primary","prepend-icon":"mdi-plus",onClick:l[0]||(l[0]=t=>N())},{default:a(()=>[...l[13]||(l[13]=[o(" Add Skill ",-1)])]),_:1})]),_:1})]),_:1}),e(_,null,{default:a(()=>[e(c,{cols:"12"},{default:a(()=>[e(sl,{modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=t=>T.value=t),"bg-color":"primary"},{default:a(()=>[e(J,{value:"all"},{default:a(()=>[...l[14]||(l[14]=[o("All Skills",-1)])]),_:1}),(s(!0),v(x,null,D(L(f).categories,t=>(s(),V(J,{key:t,value:t},{default:a(()=>[o(n(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_,{class:"mt-4"},{default:a(()=>[(s(!0),v(x,null,D(W.value,t=>(s(),V(c,{key:t.id,cols:"12",md:"6",lg:"4"},{default:a(()=>[e(g,null,{default:a(()=>[e(z,null,{default:a(()=>[o(n(t.name)+" ",1),e(S),e(I,{size:"small",color:H(t.difficulty)},{default:a(()=>[o(n(t.difficulty),1)]),_:2},1032,["color"])]),_:2},1024),e(A,null,{default:a(()=>[o(n(t.category),1)]),_:2},1024),e(C,null,{default:a(()=>[t.notes?(s(),v("div",ml,n(t.notes.substring(0,150))+n(t.notes.length>150?"...":""),1)):y("",!0),t.videoUrls&&t.videoUrls.length>0?(s(),v("div",pl,[e(K,{size:"small"},{default:a(()=>[...l[15]||(l[15]=[o("mdi-video",-1)])]),_:1}),o(" "+n(t.videoUrls.length)+" tutorial(s) ",1)])):y("",!0),t.relatedSkills&&t.relatedSkills.length>0?(s(),v("div",kl,[e(K,{size:"small"},{default:a(()=>[...l[16]||(l[16]=[o("mdi-link",-1)])]),_:1}),o(" "+n(t.relatedSkills.length)+" related skill(s) ",1)])):y("",!0)]),_:2},1024),e(E,null,{default:a(()=>[e(r,{icon:"mdi-pencil",size:"small",onClick:m=>N(t)},null,8,["onClick"]),e(r,{icon:"mdi-delete",size:"small",color:"error",onClick:m=>tl(t)},null,8,["onClick"]),e(S),e(r,{variant:"text",onClick:m=>G(t)},{default:a(()=>[...l[17]||(l[17]=[o("View Details",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(R,{modelValue:$.value,"onUpdate:modelValue":l[7]||(l[7]=t=>$.value=t),"max-width":"800",persistent:""},{default:a(()=>[e(g,null,{default:a(()=>[e(z,null,{default:a(()=>[o(n(k.value?"Edit Skill":"Add New Skill"),1)]),_:1}),e(C,null,{default:a(()=>[e(dl,{ref_key:"skillForm",ref:Y},{default:a(()=>[e(O,{modelValue:i.value.name,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value.name=t),label:"Skill Name",variant:"outlined",rules:[t=>!!t||"Skill name is required"]},null,8,["modelValue","rules"]),e(Q,{modelValue:i.value.category,"onUpdate:modelValue":l[3]||(l[3]=t=>i.value.category=t),items:L(f).categories,label:"Category",variant:"outlined",rules:[t=>!!t||"Category is required"]},null,8,["modelValue","items","rules"]),e(g,{variant:"outlined",class:"mb-4"},{default:a(()=>[e(A,null,{default:a(()=>[...l[18]||(l[18]=[o("Difficulty Level",-1)])]),_:1}),e(C,null,{default:a(()=>[e(nl,{modelValue:i.value.difficulty,"onUpdate:modelValue":l[4]||(l[4]=t=>i.value.difficulty=t),ticks:q,max:4,step:"1","show-ticks":"always","tick-size":"4"},null,8,["modelValue"])]),_:1})]),_:1}),e(rl,{modelValue:i.value.notes,"onUpdate:modelValue":l[5]||(l[5]=t=>i.value.notes=t),label:"Coaching Notes & Tips",variant:"outlined",rows:"4"},null,8,["modelValue"]),e(g,{variant:"outlined",class:"mb-4"},{default:a(()=>[e(A,null,{default:a(()=>[...l[19]||(l[19]=[o("YouTube Tutorial Links",-1)])]),_:1}),e(C,null,{default:a(()=>[(s(!0),v(x,null,D(i.value.videoUrls,(t,m)=>(s(),V(_,{key:m,align:"center"},{default:a(()=>[e(c,null,{default:a(()=>[e(O,{modelValue:i.value.videoUrls[m],"onUpdate:modelValue":Z=>i.value.videoUrls[m]=Z,placeholder:"https://www.youtube.com/watch?v=...",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(c,{cols:"auto"},{default:a(()=>[e(r,{icon:"mdi-close",size:"small",onClick:Z=>ll(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(r,{"prepend-icon":"mdi-plus",size:"small",onClick:h},{default:a(()=>[...l[20]||(l[20]=[o("Add Video",-1)])]),_:1})]),_:1})]),_:1}),e(Q,{modelValue:i.value.relatedSkills,"onUpdate:modelValue":l[6]||(l[6]=t=>i.value.relatedSkills=t),items:X.value,"item-title":"name","item-value":"id",label:"Related Skills",variant:"outlined",multiple:"",chips:""},null,8,["modelValue","items"])]),_:1},512)]),_:1}),e(E,null,{default:a(()=>[e(S),e(r,{text:"",onClick:j},{default:a(()=>[...l[21]||(l[21]=[o("Cancel",-1)])]),_:1}),e(r,{color:"primary",onClick:el},{default:a(()=>[...l[22]||(l[22]=[o("Save",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(R,{modelValue:U.value,"onUpdate:modelValue":l[10]||(l[10]=t=>U.value=t),"max-width":"900"},{default:a(()=>[d.value?(s(),V(g,{key:0},{default:a(()=>[e(z,null,{default:a(()=>[o(n(d.value.name)+" ",1),e(S),e(I,{color:H(d.value.difficulty)},{default:a(()=>[o(n(M(d.value.difficulty)),1)]),_:1},8,["color"])]),_:1}),e(A,null,{default:a(()=>[o(n(d.value.category),1)]),_:1}),e(C,null,{default:a(()=>[d.value.notes?(s(),v("div",Vl,[l[23]||(l[23]=w("div",{class:"text-h6 mb-2"},"Notes",-1)),w("p",yl,n(d.value.notes),1)])):y("",!0),d.value.videoUrls&&d.value.videoUrls.length>0?(s(),v("div",cl,[l[24]||(l[24]=w("div",{class:"text-h6 mb-2"},"Tutorial Videos",-1)),e(_,null,{default:a(()=>[(s(!0),v(x,null,D(d.value.videoUrls,(t,m)=>(s(),V(c,{key:m,cols:"12",md:"6"},{default:a(()=>[w("div",gl,[w("iframe",{src:L(vl)(t),frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Sl)])]),_:2},1024))),128))]),_:1})])):y("",!0),P.value.length>0?(s(),v("div",Cl,[l[25]||(l[25]=w("div",{class:"text-h6 mb-2"},"Related Skills",-1)),(s(!0),v(x,null,D(P.value,t=>(s(),V(I,{key:t.id,class:"mr-2 mb-2",onClick:m=>G(t)},{default:a(()=>[o(n(t.name),1)]),_:2},1032,["onClick"]))),128))])):y("",!0)]),_:1}),e(E,null,{default:a(()=>[e(r,{"prepend-icon":"mdi-pencil",onClick:l[8]||(l[8]=t=>N(d.value))},{default:a(()=>[...l[26]||(l[26]=[o("Edit",-1)])]),_:1}),e(S),e(r,{text:"",onClick:l[9]||(l[9]=t=>U.value=!1)},{default:a(()=>[...l[27]||(l[27]=[o("Close",-1)])]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1},8,["modelValue"]),e(R,{modelValue:b.value,"onUpdate:modelValue":l[12]||(l[12]=t=>b.value=t),"max-width":"400"},{default:a(()=>[e(g,null,{default:a(()=>[e(z,null,{default:a(()=>[...l[28]||(l[28]=[o("Delete Skill",-1)])]),_:1}),e(C,null,{default:a(()=>[...l[29]||(l[29]=[o("Are you sure you want to delete this skill?",-1)])]),_:1}),e(E,null,{default:a(()=>[e(S),e(r,{text:"",onClick:l[11]||(l[11]=t=>b.value=!1)},{default:a(()=>[...l[30]||(l[30]=[o("Cancel",-1)])]),_:1}),e(r,{color:"error",onClick:al},{default:a(()=>[...l[31]||(l[31]=[o("Delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Dl=fl(wl,[["__scopeId","data-v-85243a2e"]]);export{Dl as default};
