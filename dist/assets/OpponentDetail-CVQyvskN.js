import{a as F,u as E,r as C,o as j,J as q,c as A,b as c,E as T,w as t,V as G,d as r,e as s,f as B,g as f,h as g,i as u,n as m,p as y,v as n,q as I,l as w,L as J,t as a,z as O,B as x,R as P,I as R,S as X,T as K,F as Q,m as Y,U as Z,W as ee,X as te,x as se,y as le,s as ae,A as oe,G as ne,H as ue}from"./index-BS-_TD4h.js";const de={key:1,class:"text-h3"},re={class:"text-h4"},ie={class:"text-subtitle-1 mt-4"},pe={class:"text-center"},ve={class:"text-h3"},ce={class:"text-h6"},fe={style:{"white-space":"pre-wrap"}},me={class:"text-h5"},ye={class:"text-h5"},_e={class:"text-h5"},ke={class:"text-h5"},xe={key:0},Ve={key:0,style:{"white-space":"pre-wrap"}},ge={key:1,class:"text-medium-emphasis"},Ce={__name:"OpponentDetail",setup(we){const W=q(),b=F(),D=E(),o=C(null),V=C(!1),S=C(""),_=C("");j(async()=>{await D.fetchMatches(),o.value=await b.getOpponent(W.params.id),_.value=o.value?.weaknesses||"",S.value=_.value});const k=A(()=>D.getMatchesByOpponent(W.params.id)),v=A(()=>D.headToHeadStats(W.params.id)),U=A(()=>k.value.length===0?0:(k.value.reduce((e,l)=>{const i=l.scores.reduce((L,M)=>L+M.myScore,0),p=l.scores.reduce((L,M)=>L+M.oppScore,0);return e+(i-p)},0)/k.value.length).toFixed(1)),$=d=>d.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),h=d=>({Aggressive:"error",Defensive:"success",Mixed:"info"})[d]||"grey",N=d=>{const e=d.scores.reduce((i,p)=>i+p.myScore,0),l=d.scores.reduce((i,p)=>i+p.oppScore,0);return e>l?"Win":"Loss"},z=d=>{const e=d.scores.reduce((i,p)=>i+p.myScore,0),l=d.scores.reduce((i,p)=>i+p.oppScore,0);return`${e}-${l}`},H=async()=>{await b.updateOpponent(o.value.id,{...o.value,weaknesses:S.value}),o.value=await b.getOpponent(o.value.id),_.value=o.value.weaknesses||"",V.value=!1};return(d,e)=>o.value?(r(),c(G,{key:0},{default:t(()=>[s(B,null,{default:t(()=>[s(f,null,{default:t(()=>[s(g,{"prepend-icon":"mdi-arrow-left",variant:"text",onClick:e[0]||(e[0]=l=>d.$router.back())},{default:t(()=>[...e[5]||(e[5]=[u(" Back to Opponents ",-1)])]),_:1})]),_:1})]),_:1}),s(B,null,{default:t(()=>[s(f,{cols:"12",md:"4"},{default:t(()=>[s(m,null,{default:t(()=>[s(y,{class:"text-center"},{default:t(()=>[s(I,{size:"120",color:o.value.photoUrl?void 0:"primary",class:"mb-4"},{default:t(()=>[o.value.photoUrl?(r(),c(J,{key:0,src:o.value.photoUrl},null,8,["src"])):(r(),w("span",de,a($(o.value.name)),1))]),_:1},8,["color"]),n("div",re,a(o.value.name),1),s(O,{color:h(o.value.playingStyle),class:"mt-2"},{default:t(()=>[u(a(o.value.playingStyle),1)]),_:1},8,["color"]),n("div",ie,a(o.value.club||"No club"),1)]),_:1})]),_:1}),s(m,{class:"mt-4"},{default:t(()=>[s(x,null,{default:t(()=>[...e[6]||(e[6]=[u("Head-to-Head Record",-1)])]),_:1}),s(y,null,{default:t(()=>[n("div",pe,[n("div",ve,a(v.value.wins)+"-"+a(v.value.losses),1),e[7]||(e[7]=n("div",{class:"text-caption mb-4"},"Win-Loss",-1)),s(P,{"model-value":v.value.winRate,size:120,width:15,color:"primary"},{default:t(()=>[n("div",ce,a(v.value.winRate)+"%",1)]),_:1},8,["model-value"]),e[8]||(e[8]=n("div",{class:"text-caption mt-4"},"Win Rate",-1))])]),_:1})]),_:1}),o.value.notes?(r(),c(m,{key:0,class:"mt-4"},{default:t(()=>[s(x,null,{default:t(()=>[...e[9]||(e[9]=[u("Notes",-1)])]),_:1}),s(y,null,{default:t(()=>[n("p",fe,a(o.value.notes),1)]),_:1})]),_:1})):T("",!0)]),_:1}),s(f,{cols:"12",md:"8"},{default:t(()=>[s(m,{class:"mb-4"},{default:t(()=>[s(x,null,{default:t(()=>[...e[10]||(e[10]=[u("Match Statistics",-1)])]),_:1}),s(y,null,{default:t(()=>[s(B,null,{default:t(()=>[s(f,{cols:"6",md:"3"},{default:t(()=>[n("div",me,a(v.value.total),1),e[11]||(e[11]=n("div",{class:"text-caption"},"Total Matches",-1))]),_:1}),s(f,{cols:"6",md:"3"},{default:t(()=>[n("div",ye,a(v.value.wins),1),e[12]||(e[12]=n("div",{class:"text-caption"},"Wins",-1))]),_:1}),s(f,{cols:"6",md:"3"},{default:t(()=>[n("div",_e,a(v.value.losses),1),e[13]||(e[13]=n("div",{class:"text-caption"},"Losses",-1))]),_:1}),s(f,{cols:"6",md:"3"},{default:t(()=>[n("div",ke,a(U.value),1),e[14]||(e[14]=n("div",{class:"text-caption"},"Avg Score Diff",-1))]),_:1})]),_:1})]),_:1})]),_:1}),s(m,{class:"mb-4"},{default:t(()=>[s(x,null,{default:t(()=>[e[15]||(e[15]=u(" Match History ",-1)),s(R),s(O,{size:"small"},{default:t(()=>[u(a(k.value.length)+" matches",1)]),_:1})]),_:1}),s(X),k.value.length>0?(r(),c(K,{key:0},{default:t(()=>[(r(!0),w(Q,null,Y(k.value,l=>(r(),c(Z,{key:l.id,to:`/matches/${l.id}`},{prepend:t(()=>[s(I,{color:N(l)==="Win"?"success":"error"},{default:t(()=>[s(ae,null,{default:t(()=>[u(a(N(l)==="Win"?"mdi-check":"mdi-close"),1)]),_:2},1024)]),_:2},1032,["color"])]),append:t(()=>[s(g,{icon:"mdi-arrow-right",variant:"text",size:"small"})]),default:t(()=>[s(ee,null,{default:t(()=>[u(a(N(l))+" - "+a(z(l)),1)]),_:2},1024),s(te,null,{default:t(()=>[u(a(se(le)(l.date))+" • "+a(l.division)+" ",1),l.tournamentName?(r(),w("span",xe," • "+a(l.tournamentName),1)):T("",!0)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})):(r(),c(y,{key:1,class:"text-center text-medium-emphasis"},{default:t(()=>[...e[16]||(e[16]=[u(" No matches recorded yet ",-1)])]),_:1}))]),_:1}),_.value?(r(),c(m,{key:0},{default:t(()=>[s(x,null,{default:t(()=>[e[17]||(e[17]=u(" Weakness Analysis ",-1)),s(R),s(g,{icon:"mdi-pencil",size:"small",onClick:e[1]||(e[1]=l=>V.value=!0)})]),_:1}),s(y,null,{default:t(()=>[_.value?(r(),w("div",Ve,a(_.value),1)):(r(),w("div",ge,"No weakness analysis added yet"))]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1}),s(oe,{modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=l=>V.value=l),"max-width":"600"},{default:t(()=>[s(m,null,{default:t(()=>[s(x,null,{default:t(()=>[...e[18]||(e[18]=[u("Edit Weakness Analysis",-1)])]),_:1}),s(y,null,{default:t(()=>[s(ne,{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=l=>S.value=l),label:"Weakness Analysis",hint:"What tactics or shots give you trouble against this opponent?",variant:"outlined",rows:"8"},null,8,["modelValue"])]),_:1}),s(ue,null,{default:t(()=>[s(R),s(g,{text:"",onClick:e[3]||(e[3]=l=>V.value=!1)},{default:t(()=>[...e[19]||(e[19]=[u("Cancel",-1)])]),_:1}),s(g,{color:"primary",onClick:H},{default:t(()=>[...e[20]||(e[20]=[u("Save",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):T("",!0)}};export{Ce as default};
